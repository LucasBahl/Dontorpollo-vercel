"use strict";(globalThis["webpackChunkfood_shopping_cart"]=globalThis["webpackChunkfood_shopping_cart"]||[]).push([[488],{488:(e,t,i)=>{i.r(t),i.d(t,{default:()=>F});var s=i(3673),a=i(2323);const l={class:""},o={class:"q-pa-md"},r={class:"bg-dark q-pa-md q-mb-md flex"},n=(0,s.Uk)(" Menu "),d={class:"text-white"},u={class:"text-grey-5 q-pb-md",style:{"font-size":"13px"}},m=(0,s.Uk)(" Esta seguro que desea eliminar el usuario "),c=(0,s.Uk)(" Eliminar "),p=(0,s.Uk)(" Cancelar "),h={class:"title--modal"},f=(0,s.Uk)(" Usuario "),g={class:"q-pa-md q-px-md q-gutter-sm"},_={class:"row"},b=(0,s.Uk)(" No results ");function w(e,t,i,w,v,q){const $=(0,s.up)("q-icon"),x=(0,s.up)("q-btn"),y=(0,s.up)("q-table"),E=(0,s.up)("q-linear-progress"),W=(0,s.up)("q-card-section"),k=(0,s.up)("q-card"),V=(0,s.up)("q-dialog"),z=(0,s.up)("q-separator"),U=(0,s.up)("q-input"),Z=(0,s.up)("q-chip"),Q=(0,s.up)("q-select"),C=(0,s.up)("q-item-section"),I=(0,s.up)("q-item"),N=(0,s.up)("q-spinner-puff"),D=(0,s.up)("q-inner-loading"),T=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",o,[(0,s._)("div",r,[(0,s.Wm)(x,{class:"q-mr-md",size:"md",outline:"",color:"green-5",onClick:t[0]||(t[0]=e=>q.open_dialog("create"))},{default:(0,s.w5)((()=>[(0,s.Wm)($,{name:"person_add_alt",class:"q-mr-sm"}),n])),_:1})]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(v.categories,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.id},[(0,s._)("div",d,(0,a.zw)(e.id),1),(0,s.Wm)(y,{columns:v.columns,rows:e.menu,title:e.name},null,8,["columns","rows","title"])])))),128)),(0,s.Wm)(V,{modelValue:e.dialog_delete_user,"onUpdate:modelValue":t[2]||(t[2]=t=>e.dialog_delete_user=t),position:e.position},{default:(0,s.w5)((()=>[(0,s.Wm)(k,{style:{width:"350px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(E,{value:1,class:"text-negative"}),(0,s.Wm)(W,{class:"row items-center no-wrap"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",u,[(0,s.Wm)($,{name:"info",size:"sm",class:"q-mr-sm"}),m]),(0,s.Wm)(x,{size:"12px",outline:"",color:"grey-4",class:"q-mr-md",onClick:t[1]||(t[1]=t=>q.delete_user(e.form_id))},{default:(0,s.w5)((()=>[c])),_:1}),(0,s.wy)(((0,s.wg)(),(0,s.j4)(x,{size:"12px",outline:"",color:"grey-6"},{default:(0,s.w5)((()=>[p])),_:1})),[[T]])])])),_:1})])),_:1})])),_:1},8,["modelValue","position"]),(0,s.Wm)(V,{modelValue:e.dialog,"onUpdate:modelValue":t[10]||(t[10]=t=>e.dialog=t),"transition-show":"scale","transition-hide":"scale"},{default:(0,s.w5)((()=>[(0,s.Wm)(k,{class:"detalle",style:{"max-width":"700px",width:"600px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(W,null,{default:(0,s.w5)((()=>[(0,s._)("div",h,[(0,s._)("b",null,(0,a.zw)(e.title),1),f])])),_:1}),(0,s.Wm)(z),(0,s._)("div",g,[(0,s.Wm)(U,{ref:"fullname",class:"font--input",outlined:"","stack-label":"",color:"green-5",label:"Nombre Completo","bottom-slots":"",modelValue:e.form_fullname,"onUpdate:modelValue":t[3]||(t[3]=t=>e.form_fullname=t),rules:[q.required]},null,8,["modelValue","rules"]),(0,s._)("div",_,[(0,s.Wm)(U,{ref:"username",class:"font--input col q-mr-md",outlined:"","stack-label":"",color:"green-5",label:"Nombre de Usuario","bottom-slots":"",modelValue:e.form_username,"onUpdate:modelValue":t[4]||(t[4]=t=>e.form_username=t),rules:[q.required]},null,8,["modelValue","rules"]),(0,s.Wm)(U,{ref:"password",class:"font--input col",outlined:"","stack-label":"",color:"green-5",label:"ContraseÃ±a","bottom-slots":"",modelValue:e.form_password,"onUpdate:modelValue":t[5]||(t[5]=t=>e.form_password=t),rules:[q.required]},null,8,["modelValue","rules"])]),(0,s.Wm)(U,{ref:"email",class:"font--input col",outlined:"","stack-label":"",color:"green-5",label:"E-Mail","bottom-slots":"",modelValue:e.form_email,"onUpdate:modelValue":t[6]||(t[6]=t=>e.form_email=t),rules:[q.required,q.email]},null,8,["modelValue","rules"]),(0,s.Wm)(Q,{ref:"widgets",class:"font--input",outlined:"",clearable:"",modelValue:e.form_widgets,"onUpdate:modelValue":t[7]||(t[7]=t=>e.form_widgets=t),modelModifiers:{trim:!0},options:e.list_widgets,"stack-label":"",multiple:"",color:"green-5",label:"Widgets","lazy-rules":"",rules:[e=>!!e||"Seleccione al menos una opcion"]},{"selected-item":(0,s.w5)((e=>[(0,s.Wm)(Z,{removable:"",dense:"",onRemove:t=>e.removeAtIndex(e.index),tabindex:e.tabindex,color:"grey-10","text-color":"green-5",class:"q-mx-xs q-pa-sm"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.opt.label),1)])),_:2},1032,["onRemove","tabindex"])])),_:1},8,["modelValue","options","rules"]),(0,s.Wm)(Q,{ref:"institutions",class:"font--input",outlined:"",multiple:"",modelValue:e.form_institutions,"onUpdate:modelValue":t[8]||(t[8]=t=>e.form_institutions=t),"use-input":"","stack-label":"",color:"green-5",label:"Instituciones","fill-input":"","input-debounce":"0",options:e.select_institutions,onFilter:q.filter_fn,"lazy-rules":"",rules:[e=>!!e||"Seleccione al menos una Institucion"]},{"no-option":(0,s.w5)((()=>[(0,s.Wm)(I,null,{default:(0,s.w5)((()=>[(0,s.Wm)(C,{class:"text-grey"},{default:(0,s.w5)((()=>[b])),_:1})])),_:1})])),"selected-item":(0,s.w5)((e=>[(0,s.Wm)(Z,{removable:"",dense:"",onRemove:t=>e.removeAtIndex(e.index),tabindex:e.tabindex,color:"grey-10","text-color":"green-5",class:"q-mx-xs q-pa-sm"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.opt.label),1)])),_:2},1032,["onRemove","tabindex"])])),_:1},8,["modelValue","options","onFilter","rules"])]),(0,s.Wm)(z),(0,s._)("div",null,[(0,s.Wm)(x,{outline:"",label:e.name_button,class:"q-my-md q-mx-md float-right",type:"button",style:{"font-size":"12px"},color:"green-5",onClick:t[9]||(t[9]=t=>"Nuevo"==e.title?q.create_user():q.modify_user())},null,8,["label"]),(0,s.wy)((0,s.Wm)(x,{style:{"font-size":"12px"},label:"Cerrar",type:"cancel",color:"green-5",flat:"",class:"q-ml-sm q-my-md float-right"},null,512),[[T]])]),(0,s.Wm)(D,{showing:e.dialog_loading,class:"bg-grey-10"},{default:(0,s.w5)((()=>[(0,s.Wm)(N,{size:"50px",color:"green-5"})])),_:1},8,["showing"])])),_:1})])),_:1},8,["modelValue"])]),(0,s.Wm)(D,{showing:e.loading_screen,class:"z-top bg-dark"},{default:(0,s.w5)((()=>[(0,s.Wm)(N,{size:"50px",color:"green-5"})])),_:1},8,["showing"])])}var v=i(8127);const q={components:{},created(){this.getDataTable()},data(){return{db:(0,v.ad)(),dataTableOrders:[],categories:null,columns:[{name:"name",label:"Nombre",align:"left",field:"name"},{name:"direccion",align:"center",label:"Direccion",field:"direccion"},{name:"ingredients",align:"center",label:"Ingredientes",field:"ingredients"},{name:"price",align:"center",label:"Pedidos",field:"price"}]}},methods:{async getDataTable(){const e=await(0,v.PL)((0,v.hJ)(this.db,"menus"));e.forEach((e=>{console.log(`${e.id} =>`),this.categories=e.data().category}))},filter_fn(e,t,i){t((()=>{const t=e.toLocaleLowerCase();this.select_institutions=this.list_institutions.filter((e=>e.label.toLocaleLowerCase().indexOf(t)>-1))}))},qlookid(e){return qlookid(e)},required(e){return required(e)},email(e){return email(e)},on_request(e){this.loading_table=!0;const{page:t,rowsPerPage:i,sortBy:s,descending:a}=e.pagination;this.filter=e.filter;let l=`/api/importal?page_size=8&page_number=${t}`;this.filter&&(l+=`&search=${this.filter}`),this.$axios.get(l).then((e=>{this.data_table=e.data.users,this.pagination.rowsNumber=e.data.total_results,this.pagination.page=e.data.page_size,this.loading_table=!1}))},widgets_icon(e){let t=null;return this.list_widgets.forEach((i=>{i.value==e&&(t=this.widget_icon[i.value])})),t},get_institution(e){let t=null;return this.list_institutions.forEach((i=>{i.value==e&&(t=i.label)})),t},open_dialog(e,t){if(this.dialog=!0,"create"==e)this.title="Nuevo",this.name_button="Crear",this.form_widgets=[{label:"Mapa",value:1},{label:"DownTime Actual",value:2},{label:"UpTime Diario Actual",value:3},{label:"Equipos Falladores",value:5}];else if("modify"==e){let e=[];t.institutions.forEach((t=>{this.list_institutions.forEach((i=>{t==i.value&&e.push({label:i.label,value:i.value})}))}));let i=[];t.widgets.forEach((e=>{this.list_widgets.forEach((t=>{e==t.value&&i.push({label:t.label,value:t.value})}))})),this.form_id=t.id_user,this.form_email=t.email,this.form_fullname=t.description,this.form_username=t.username,this.form_password=t.password,this.form_widgets=i,this.form_institutions=e,this.name_button="Guardar",this.title="Modificar"}},open_dialog_delete_user(e,t){this.form_id=t,this.position=e,this.dialog_delete_user=!0},delete_user(e){this.dialog_delete_user=!1,this.loading_table=!0;const t={id_user:[e]};this.$axios.put("/api/importal",t).then((e=>{let t=`/api/importal?page_size=8&page_number=${this.pagination.page}`;this.filter&&(t+=`&search=${this.filter}`),this.$axios.get(t).then((e=>{this.data_table=e.data.users,this.pagination.rowsNumber=e.data.total_results,this.pagination.page=e.data.page_size,this.loading_table=!1,this.$q.notify({icon:"done",color:"green-5",message:"El usuario se elimino correctamente",position:"bottom",timeout:2e3})}))})).catch((e=>{this.$q.notify({icon:"privacy_tip",message:"No se pudo eliminar el usuario",position:"bottom",timeout:2e3}),this.loading_table=!1}))},modify_user(){if(this.$refs.fullname.validate(),this.$refs.email.validate(),this.$refs.username.validate(),this.$refs.password.validate(),this.$refs.widgets.validate(),this.$refs.institutions.validate(),!this.$refs.fullname.hasError&&!this.$refs.email.hasError&&!this.$refs.username.hasError&&!this.$refs.password.hasError&&!this.$refs.widgets.hasError&&!this.$refs.institutions.hasError){this.dialog_loading=!0;let e=[];this.form_institutions.forEach((t=>{e.push(t.value)}));let t=[];this.form_widgets.forEach((e=>{t.push(e.value)}));const i={id_user:this.form_id,description:this.form_fullname,email:this.form_email,username:this.form_username,password:this.form_password,widgets:t,institutions:e};this.$axios.patch("/api/importal",i).then((e=>{let t=`/api/importal?page_size=8&page_number=${this.pagination.page}`;this.filter&&(t+=`&search=${this.filter}`),this.$axios.get(t).then((e=>{this.data_table=e.data.users,this.dialog=!1,this.dialog_loading=!1,this.$q.notify({icon:"done",color:"green-5",message:"El usuario se modifico correctamente",position:"bottom",timeout:2e3})}))})).catch((e=>{this.dialog_loading=!1,this.$q.notify({icon:"privacy_tip",message:"El usuario no se pudo modificar",position:"bottom",timeout:2e3})}))}},create_user(){if(this.$refs.fullname.validate(),this.$refs.email.validate(),this.$refs.username.validate(),this.$refs.password.validate(),this.$refs.widgets.validate(),this.$refs.institutions.validate(),!this.$refs.fullname.hasError&&!this.$refs.email.hasError&&!this.$refs.username.hasError&&!this.$refs.password.hasError&&!this.$refs.widgets.hasError&&!this.$refs.institutions.hasError){this.dialog_loading=!0;let e=[];this.form_institutions.forEach((t=>{e.push(t.value)}));let t=[];this.form_widgets.forEach((e=>{t.push(e.value)}));const i={description:this.form_fullname,email:this.form_email,username:this.form_username,password:this.form_password,widgets:t,institutions:e};this.$axios.post("/api/importal",[i]).then((e=>{let t=`/api/importal?page_size=8&page_number=${this.pagination.page}`;this.filter&&(t+=`&search=${this.filter}`),this.$axios.get(t).then((e=>{this.data_table=e.data.users,this.pagination.rowsNumber=e.data.total_results,this.dialog=!1,this.dialog_loading=!1,this.$q.notify({icon:"done",color:"green-5",message:"El usuario se creo correctamente",position:"bottom",timeout:2e3})}))})).catch((e=>{this.dialog_loading=!1;let t=null;e.response.data.failedInExistence.length>0&&(t="El nombre de usuario ingresado ya existe"),this.$q.notify({icon:"privacy_tip",message:t,position:"bottom",timeout:2e3})}))}}}};var $=i(4260),x=i(8240),y=i(4554),E=i(3939),W=i(6778),k=i(151),V=i(1598),z=i(5589),U=i(5869),Z=i(4842),Q=i(6325),C=i(7030),I=i(3414),N=i(2035),D=i(6941),T=i(8430),L=i(6115),P=i(677),S=i(7518),M=i.n(S);const A=(0,$.Z)(q,[["render",w]]),F=A;M()(q,"components",{QBtn:x.Z,QIcon:y.Z,QTable:E.Z,QDialog:W.Z,QCard:k.Z,QLinearProgress:V.Z,QCardSection:z.Z,QSeparator:U.Z,QInput:Z.Z,QSelect:Q.Z,QChip:C.Z,QItem:I.Z,QItemSection:N.Z,QInnerLoading:D.Z,QSpinnerPuff:T.Z,QField:L.Z}),M()(q,"directives",{ClosePopup:P.Z})}}]);